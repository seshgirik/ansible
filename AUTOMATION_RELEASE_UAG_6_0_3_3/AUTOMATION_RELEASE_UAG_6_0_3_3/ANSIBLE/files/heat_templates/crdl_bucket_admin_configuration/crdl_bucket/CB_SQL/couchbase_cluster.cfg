PRODUCT="CRDL_CFG_PRODUCT"
CRDL_PRODUCT_RAM_WEIGHT="CRDL_CFG_RAM_WEIGHT"
CRDL_NODE_OAM_IP_LIST="CRDL_CFG_CLUSTER_OAM_IP_LIST"
CRDL_NODE_DBTRAFFIC_IP_LIST="CRDL_CFG_CLUSTER_DBTRAFFIC_IP_LIST"
CRDL_USER_NAME="CRDL_CFG_USER_NAME"
CRDL_USER_PASSWD="CRDL_CFG_USER_PASSWD"
LogDir="/usr/DB/logs"

unset -f logCluster;
logCluster()
{
  TP="+%H:%M:%S"
  TS=`date $TP|sed 's/ /0/g'`
  TYPE=""
  [ $# -gt 1 ] && \
    TYPE="$1" && shift
  [ ! -z "$Logfile" ] && \
    echo "$TS:$TYPE:$1" >> $Logfile
    echo "$TS:$TYPE:$1"
}

unset -f logBucket;
logBucket()
{
  TP="+%H:%M:%S"
  TS=`date $TP|sed 's/ /0/g'`
  TYPE=""
  [ $# -gt 1 ] && \
    TYPE="$1" && shift
  [ ! -z "$Logfile" ] && \
    echo "$TS:$TYPE:$1" >> $Logfile
    echo "$TS:$TYPE:$1"
}

unset -f clusterLogFile;
clusterLogFile() {
  mkdir -p ${LogDir}
  Logfile=${LogDir}/CRDL_Cluster_Setup.log

  if [ -f "$Logfile" ]; then
      typeset -i logSize=`ls -l $Logfile|awk '{print $5}'`
      [ "$logSize" -gt "10000" ] && mv $Logfile $Logfile.b4
  fi
  touch $Logfile
}

unset -f bucketLogFile;
bucketLogFile() {
  mkdir -p ${LogDir}
  Logfile=${LogDir}/CRDL_Bucket_Setup.log

  if [ -f "$Logfile" ]; then
      typeset -i logSize=`ls -l $Logfile|awk '{print $5}'`
      [ "$logSize" -gt "10000" ] && mv $Logfile $Logfile.b4
  fi
  touch $Logfile
}

crdl_ClustRam()
{
	total_RAM_Size=`free -m | grep -i "mem" | awk '{print $2}'`
	RAM_SIZE_PERCENTILE=$((total_RAM_Size/100))
	CRDL_CLUSTER_RAMSIZE_DEC=$((RAM_SIZE_PERCENTILE*65))
	CRDL_CLUSTER_RAMSIZE=`echo ${CRDL_CLUSTER_RAMSIZE_DEC%.*}`
	CRDL_CLUSTER_INDEX_RAMSIZE_DEC=$((RAM_SIZE_PERCENTILE*15))
	CRDL_CLUSTER_INDEX_RAMSIZE=`echo ${CRDL_CLUSTER_INDEX_RAMSIZE_DEC%.*}`
}
crdl_ClustRam

DNS_STATUS=`echo $PRODUCT | egrep -i "VMAS" | wc -l`

crdl_BucketName()
{
[ $PROD = TAS ] && CRDL_BUCKET_NAME="sessiondb_tas"
[ $PROD = CSCF ] && CRDL_BUCKET_NAME="imsNfvCouchbase1"
[ $PROD = EPDG ] && CRDL_BUCKET_NAME="epdg_bucket"
[ $PROD = IPSM ] && CRDL_BUCKET_NAME="sessiondb_ipsm"
[ $PROD = AGW ] && CRDL_BUCKET_NAME="sessiondb_agw"
[ $PROD = UAG_SC ] && CRDL_BUCKET_NAME="SCNfvCouchbase"
[ $PROD = UAG_MP ] && CRDL_BUCKET_NAME="MPNfvCouchbase"
[ $PROD = UAG_TC ] && CRDL_BUCKET_NAME="TCNfvCouchbase"
[ $PROD = SDC ] && CRDL_BUCKET_NAME="sessiondb_sdc"
[ $PROD = WSG ] && CRDL_BUCKET_NAME="sessiondb_wsg"
[ $PROD = UCCAS ] && CRDL_BUCKET_NAME="sessiondb_uccas"
[ $PROD = PNS ] && CRDL_BUCKET_NAME="sessiondb_pns"
[ $PROD = SCEF ] && CRDL_BUCKET_NAME="sessiondb_scef"
[ $PROD = VMAS ] && CRDL_BUCKET_NAME="sessiondb_vmas"
[ $PROD = VLB_TAS ] && CRDL_BUCKET_NAME="sessionDBVLB_TAS"
[ $PROD = VLB_CSCF ] && CRDL_BUCKET_NAME="sessionDBVLB_CSCF"
[ $PROD = VLB_EPDG ] && CRDL_BUCKET_NAME="sessionDBVLB_EPDG"
[ $PROD = VLB_IPSM ] && CRDL_BUCKET_NAME="sessionDBVLB_IPSM"
[ $PROD = VLB_AGW ] && CRDL_BUCKET_NAME="sessionDBVLB_AGW"
[ $PROD = VLB_UAG_SC ] && CRDL_BUCKET_NAME="sessionDBVLB_UAG_SC"
[ $PROD = VLB_UAG_MP ] && CRDL_BUCKET_NAME="sessionDBVLB_UAG_MP"
[ $PROD = VLB_UAG_TC ] && CRDL_BUCKET_NAME="sessionDBVLB_UAG_TC"
[ $PROD = VLB_SDC ] && CRDL_BUCKET_NAME="sessionDBVLB_SDC"
[ $PROD = VLB_WSG ] && CRDL_BUCKET_NAME="sessionDBVLB_WSG"
[ $PROD = VLB_UCCAS ] && CRDL_BUCKET_NAME="sessionDBVLB_UCCAS"
[ $PROD = VLB_PNS ] && CRDL_BUCKET_NAME="sessionDBVLB_PNS"
[ $PROD = VLB_SCEF ] && CRDL_BUCKET_NAME="sessionDBVLB_SCEF"
[ $PROD = VLB_VMAS ] && CRDL_BUCKET_NAME="sessionDBVLB_VMAS"
[ $PROD = MAAP ] && CRDL_BUCKET_NAME="sessiondb_maap"
[ $PROD = XRAN ] && CRDL_BUCKET_NAME="sessiondb_xran"
[ $PROD = PGW ] && CRDL_BUCKET_NAME="sessiondb_pgw"
[ $PROD = PRS ] && CRDL_BUCKET_NAME="sessiondb_prs"
[ $PROD = CDB ] && CRDL_BUCKET_NAME="sessiondb_cdb"
[ $PROD = VRCS ] && CRDL_BUCKET_NAME="sessiondb_vrcs"
[ $PROD = HSS ] && CRDL_BUCKET_NAME="sessiondb_hss"
[ $PROD = WRG ] && CRDL_BUCKET_NAME="sessiondb_wrg"
}
